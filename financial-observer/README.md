# Цель

Помочь пользователю видеть, **куда уходят деньги**, ставить **цели накоплений** и учиться базовым принципам финансовой грамотности через **микро-уроки и квизы**.

# 1) Объем MVP (первая версия)

* Регистрация/логин (у брата уже есть).
* **Операции**: добавление доходов/расходов с категориями.
* **Дашборд**: баланс за месяц, диаграмма категорий, последние 10 операций.
* **Цели**: создать цель (сумма, срок), прогресс-бар.
* **Учебные карточки** (5–7 штук) + **мини-квиз** на 3–5 вопросов.
* **Совет дня** (простое правило на основе трат по категориям).
* Профиль: валюта, начало финансового месяца, быстрые категории.

# 2) Пользовательские истории (что должно работать)

* Я могу добавить расход «кофе 250 ₽ → Еда вне дома».
* Я вижу круговую диаграмму: «Еда — 32%, Транспорт — 15%…».
* Я создаю цель «20 000 ₽ на велосипед до 1 декабря» и вижу прогресс.
* Я прохожу квиз «Дебетовая vs кредитная карта» и получаю балл.
* Я получаю совет: «Траты на еду вне дома >25% — попробуйте готовить 2 раза/нед.».

# 3) Структура данных (минимум)

Таблицы:

* `users(id, email, hash, currency, month_start_day)`
* `categories(id, user_id, name, type)` — `type`: `income|expense`
* `transactions(id, user_id, category_id, amount, date, note)`
  Индексы по `(user_id, date)`.
* `goals(id, user_id, title, target_amount, deadline, saved_amount)`
* `lessons(id, slug, title, content_md, level)` — карточки-уроки
* `quizzes(id, lesson_id, question, options_json, correct_index)`
* `quiz_results(id, user_id, lesson_id, score, taken_at)`

Базовые категории (сидовые):
Доход: Зарплата, Фриланс.
Расход: Еда, Транспорт, Жильё, Связь, Здоровье, Развлечения, Одежда, Образование, Другое.

# 4) API/эндпоинты (если SPA/мобильное)

* `POST /auth/register|login`
* `GET /me`
* `GET /categories` / `POST /categories`
* `GET /transactions?from&to` / `POST /transactions` / `DELETE /transactions/:id`
* `GET /dashboard?month=YYYY-MM` → { totalIncome, totalExpense, byCategory\[], recent\[] }
* `GET /goals` / `POST /goals` / `PATCH /goals/:id` (обновить `saved_amount`)
* `GET /lessons` / `GET /lessons/:slug`
* `GET /quizzes?lesson=:id` / `POST /quiz/submit` → { score }

# 5) Интерфейс (страницы)

* **Dashboard**: баланс месяца, donut-chart по категориям, лента операций, кнопка «Добавить».
* **Операции**: форма + список с фильтрами (месяц, категория).
* **Цели**: список целей с прогресс-барами, кнопка «Пополнить».
* **Обучение**: список карточек (превью), внутри — текст + «Пройти квиз».
* **Профиль**: валюта (₽ по умолчанию), старт дня месяца (1/5/10), управление категориями.

# 6) Логика и правила (просто и понятно)

* Баланс месяца = `Σ доходов − Σ расходов` за выбранный месяц.
* Прогресс цели = `saved_amount / target_amount`.
* Совет дня (MVP):

  * Если `Еда вне дома > 25% расходов месяца` → совет №1.
  * Если `Подписки > 10%` → совет №2.
  * Если `Накопления в этом месяце = 0` → совет №3.
* Квиз: 3–5 вопросов, 1 балл за правильный ответ. Хранить лучший результат.

# 7) Быстрый технический стек (вариант)

* **Backend**: Node.js + Express / NestJS; БД Postgres/SQLite (для старта — SQLite).
* **Frontend**: React + Vite; графики — Chart.js или Recharts.
* **Auth**: JWT (httpOnly cookies).
* **Статика уроков**: Markdown в БД или файлах.

# 8) Сид-данные (для демо)

* 2 пользователя (demo1, demo2).
* По 15–20 операций за текущий месяц, разносим по 6–8 категориям.
* 2 цели (накопить 5 000 ₽ / 20 000 ₽).
* 6 уроков: «Правило 50/30/20», «Фонд подушки», «Долги и проценты», «Кэшбэк», «Инфляция», «Кредит vs рассрочка».
* По 3 вопроса на урок.

# 9) Мини-дорожная карта (итерации)

**День 1–2**: модели БД, сиды, auth, CRUD транзакций.
**День 3**: дашборд и диаграмма, фильтры по дате.
**День 4**: цели и прогресс-бар.
**День 5**: уроки и квизы.
**День 6**: «совет дня», профиль, базовая валидация.
**День 7**: полировка UX, пустые состояния, деплой.

# 10) Критерии готовности MVP

* < 2 кликов, чтобы добавить расход.
* Дашборд грузится < 1 сек, диаграмма корректна для пустых и полных данных.
* Можно создать/пополнить цель и увидеть обновлённый прогресс.
* 5+ уроков, работает прохождение квиза, сохраняется результат.
* Есть 3 простых «совета дня» по данным пользователя.

# 11) Мини-безопасность и приватность

* Хранить пароли через bcrypt/argon2.
* JWT в httpOnly + SameSite=Lax.
* Ограничить размер вводимых заметок (например, 200 символов).
* Простая rate-limit на `POST /transactions`.
* Не собирать лишние персональные данные.

# 12) Идеи на вторую итерацию (после MVP)

* План-бюджет на месяц (лимиты по категориям + алерты).
* Импорт CSV из банка/Тинькофф/Сбера.
* Повторяющиеся операции (подписки).
* Расширенная аналитика: тренды по месяцам, медианные траты.
* Социальные челленджи «Отложи 100 ₽ в день 7 дней подряд».
* Персональные уроки по результатам трат.

# Дизайн

...